using System.Text.Json;

public class Program
{
    public static async Task Main(string[] args)
    {

        var result = await IntentClassifier.ClassifyIntent("Where can I find help paying for my child's therapy?");
        AutismParentMatcher.Match(result);
    }

    static List<string> GetRecordsByFamilyMemberAge(int age)
    {
        string filePath = Path.Combine(AppContext.BaseDirectory, "sample.json");
        string jsonData = File.ReadAllText(filePath);
        var data = JsonSerializer.Deserialize<JsonDocument>(jsonData);

        var matchingRecords = new List<string>();

        foreach (var user in data.RootElement.GetProperty("users").EnumerateArray())
        {
            foreach (var familyMember in user.GetProperty("familyMembers").EnumerateArray())
            {
                if (familyMember.GetProperty("age").GetInt32() == age)
                {
                    string userName = user.GetProperty("fullName").GetString();
                    string familyMemberName = familyMember.GetProperty("fullName").GetString();
                    matchingRecords.Add($"{userName} ({familyMemberName})");
                    break;
                }
            }
        }

        return matchingRecords;
    }
}
